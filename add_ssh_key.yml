---

  - name: Adding server key
    hosts: routers

    vars_prompt:
      - name: new_password
        prompt: Type new password
        private: yes
        
    tasks:
      - name: Send Ansible server key
        cisco.ios.ios_user:
          name: ansible
          sshkey: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"
          state: present

      - name: Change default password
        cisco.ios.ios_user:
          name: ansible
          configured_password: "{{ new_password }}"
          password_type: secret
          